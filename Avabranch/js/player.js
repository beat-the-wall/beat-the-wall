function Player(s,i,t,e,h){this.game=s,this.speed=e||4,this.ySpeed=h||4,this.lineCount=4,this.lineRadius=10,this.x=i||canvas.width/2-this.lineRadius*this.lineCount,this.y=t||canvas.height-canvas.height/3,this.colors=["#E67373","#ECEC85","#9DE970","#708EE9"],this.branchState=0,this.branchStates=[1,4],this.lines=[];for(var n=0;n<this.lineCount;n++)this.lines.push(new Line(this.game,global_controls.colors[n],this.x+n*this.lineRadius*2,this.y,this.lineRadius,global_controls.keyMaps[this.branchStates[this.branchState]][n],this.speed,this.ySpeed));this.lines[2].isDead=!0,this.lines[3].isDead=!0,this.physics=function(s){for(var i=0;i<this.lines.length;i++){(t=this.lines[i]).isDead&&1}for(i=0;i<this.lines.length;i++){var t;(t=this.lines[i]).keys=global_controls.keyMaps[this.branchStates[this.branchState]][i],t.physics(s)}},this.setLineSpeed=function(s){for(var i=0;i<this.lines.length;i++){this.lines[i].speed=s}},this.setLineRadius=function(s){for(var i=0;i<this.lines.length;i++){this.lines[i].r=s}0===this.branchState&&this.merge()},this.draw=function(s){for(var i=0;i<this.lines.length;i++){this.lines[i].draw(s)}},this.splitAll=function(){for(var s={},i=0;i<this.lines.length;i++){var t=this.lines[i];if(!t.isDead)s[h=t.keys[0]]?s[h].lines.push(t):s[h]={lines:[t]}}var e=Object.keys(s);for(i=0;i<e.length;i++){var h;if(s[h=e[i]].lines.length>1)for(var n=1;n<s[h].lines.length;n++)s[h].lines[n].tarX=1.25*s[h].lines[n].r*n+s[h].lines[n].x}},this.hasCol=function(s){for(var i=0;i<this.lines.length;i++)if(this.lines[i].color===s&&!this.lines[i].isDead)return!0;return!1},this.getCol=function(s){for(var i=0;i<this.lines.length;i++)if(this.lines[i].color===s)return this.lines[i];return this.lines[0]},this.merge=function(){for(var s=0,i=0,t=0;t<this.lines.length;t++){(n=this.lines[t]).isDead||(s+=n.x,i+=1)}var e=s/i,h=0;for(t=0;t<this.lines.length;t++){var n;(n=this.lines[t]).isDead||(n.tarX=h*n.r*2+e,h+=1)}},keyListeners.push([" ",function(){this.branchState+=1,this.branchState=this.branchState%this.branchStates.length;for(var s=0;s<this.lines.length;s++){this.lines[s].isDead||1}0===this.branchState?this.merge():this.splitAll()}.bind(this)])}