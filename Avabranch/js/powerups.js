function PowerupSpawner(t,s){this.game=t,this.powerups=[],this.level=s||1,this.powers=["slow","speed","grow","shrink"],this.draw=function(t){for(var s=0;s<this.powerups.length;s++)this.powerups[s].draw(t)},this.physics=function(t){for(var s=this.powerups.length-1;s>=0;s--)this.powerups[s].physics(t),(this.powerups[s].remove||this.powerups[s].y+30>this.game.canvas.height)&&this.powerups.splice(s,1)},this.spawn=function(){var t=Math.random()*canvas.width;this.powerups.push(new Powerup(this,t,-30,this.powers[Math.floor(Math.random()*this.powers.length)]))}}function Powerup(t,s,i,e){this.parent=t,this.x=s||0,this.y=i||0,this.r=5,this.isDead=!1,this.remove=!1,this.speed=3,this.type=e||"slow",this.particles=[],this.particleCount=120,"slow"===this.type?(this.color="#708EE9",this.act=function(){var t=this.parent.game.objects.player;t.hasCol(this.color)?(t.setLineSpeed(t.speed-2),this.powerTimer=setTimeout(function(t){t.setLineSpeed(t.speed)},1e4,this.parent.game.objects.player)):t.getCol(this.color).revive()}):"speed"===this.type?(this.color="#9DE970",this.act=function(){var t=this.parent.game.objects.player;t.hasCol(this.color)?(t.setLineSpeed(t.speed+2),this.powerTimer=setTimeout(function(t){t.setLineSpeed(t.speed)},1e4,this.parent.game.objects.player)):t.getCol(this.color).revive()}):"grow"===this.type?(this.color="#E67373",this.act=function(){var t=this.parent.game.objects.player;t.hasCol(this.color)?(t.setLineRadius(t.lineRadius+3),this.powerTimer=setTimeout(function(t){t.setLineRadius(t.lineRadius)},1e4,this.parent.game.objects.player)):t.getCol(this.color).revive()}):"shrink"===this.type&&(this.color="#ECEC85",this.act=function(){var t=this.parent.game.objects.player;t.hasCol(this.color)?(t.setLineRadius(t.lineRadius-3),this.powerTimer=setTimeout(function(t){t.setLineRadius(t.lineRadius)},1e4,this.parent.game.objects.player)):t.getCol(this.color).revive()});for(var h=0;h<this.particleCount;h++)this.particles.push(new Particle(this,Math.random()/20+.05,15*Math.random()+6));this.draw=function(t){for(var s=0;s<this.particles.length;s++)this.particles[s].draw(t);t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this.r,2*Math.PI,!1),t.fill()},this.physics=function(t){this.isDead||(this.y+=this.speed*t*.05),this.isDead&&(this.r-=.2,this.r<0&&(this.r=0,this.remove=!0));for(var s=0;s<this.particles.length;s++)this.particles[s].physics(t)}}function Particle(t,s,i){this.parent=t,this.speed=s||.1,this.dist=i,this.radius=1,this.x=this.parent.x+20||0,this.y=this.parent.y+20||0,this.rot=Math.random()*Math.PI,this.r=0,this.g=130,this.b=130,this.draw=function(t){t.fillStyle=this.parent.color,t.beginPath(),t.arc(this.x,this.y,this.radius,2*Math.PI,!1),t.fill(),t.closePath()},this.physics=function(t){this.parent.isDead&&(this.dist-=1),this.dist<=0&&(this.dist=0,this.radius=0),this.rot+=this.speed,this.x=this.parent.x+Math.sin(this.rot)*this.dist,this.y=this.parent.y+Math.cos(this.rot)*this.dist}}